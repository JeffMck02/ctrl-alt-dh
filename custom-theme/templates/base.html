<!DOCTYPE html>
<html lang="{% block html_lang %}{{ DEFAULT_LANG }}{% endblock html_lang %}">
        <head>
                {% block head %}
                        <meta charset="utf-8" />
                        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                        <meta name="generator" content="Pelican" />
                        <title>{% block title %}{{ SITENAME|striptags }}{%endblock%}</title>
                        <link rel="stylesheet" href="{{ SITEURL }}/{{ THEME_STATIC_DIR }}/css/{{ CSS_FILE }}" />
                        {% if FEED_ALL_ATOM %}
                                <link href="{{ FEED_DOMAIN }}/{% if FEED_ALL_ATOM_URL %}{{ FEED_ALL_ATOM_URL }}{% else %}{{ FEED_ALL_ATOM }}{% endif %}" type="application/atom+xml" rel="alternate" title="{{ SITENAME|striptags }} Atom Feed" />
                        {% endif %}
                        {% if FEED_ALL_RSS %}
                                <link href="{{ FEED_DOMAIN }}/{% if FEED_ALL_RSS_URL %}{{ FEED_ALL_RSS_URL }}{% else %}{{ FEED_ALL_RSS }}{% endif %}" type="application/rss+xml" rel="alternate" title="{{ SITENAME|striptags }} RSS Feed" />
                        {% endif %}
                        {% block extra_head %}{% endblock extra_head %}
                {% endblock head %}
        </head>

        <script>
                document.addEventListener('DOMContentLoaded', function () {
                    const toggles = document.querySelectorAll('#banner nav li.dropdown .dropdown-toggle');
                    toggles.forEach(toggle => {
                        toggle.addEventListener('click', function (e) {
                            e.stopPropagation(); // donâ€™t bubble up to document
                            const parentLi = this.closest('li.dropdown');
                            // close others
                            document.querySelectorAll('#banner nav li.dropdown').forEach(li => {
                                if (li !== parentLi) li.classList.remove('open');
                            });
                            // toggle current
                            parentLi.classList.toggle('open');
                        });
                    });
                
                    // optional: close if clicking outside
                    document.addEventListener('click', function () {
                        document.querySelectorAll('#banner nav li.dropdown').forEach(li => li.classList.remove('open'));
                    });
                });
        </script>
                

        <body id="index" class="home">
                {% include 'github.html' %}
                <header id="banner" class="body">
                        <h1>

                                <div class="site-logo">
                                        <a href="{{ SITEURL }}/"><img src="{{ SITEURL }}/images/ctrl-logo.png" alt="{{ SITENAME }}" /></a>
                                </div>
                        </h1>

                        <nav><ul>
                                {% for item in MENUITEMS %}
                                {% if item[1] is iterable and item[1] is not string %}
                                    {# This is a dropdown #}
                                    <li class="dropdown">
                                        <a href="javascript:void(0);" class="dropdown-toggle">{{ item[0] }}</a>
                                        <ul class="dropdown-menu">
                                            {% for sub_title, sub_link in item[1] %}
                                                <li><a href="{{ SITEURL }}{{ sub_link }}">{{ sub_title }}</a></li>
                                            {% endfor %}
                                        </ul>
                                    </li>
                                {% else %}
                                    {# This is a normal link #}
                                    <li><a href="{{ SITEURL }}{{ item[1] }}">{{ item[0] }}</a></li>
                                {% endif %}
                            {% endfor %}
                                {# Keep your existing optional blocks as-is #}
                                {% if DISPLAY_PAGES_ON_MENU -%}
                                        {% for pg in pages %}
                                        <li{% if pg == page %} class="active"{% endif %}><a href="{{ SITEURL }}/{{ pg.url }}">{{ pg.title }}</a></li>
                                        {% endfor %}
                                {% endif %}
                                {% if DISPLAY_CATEGORIES_ON_MENU -%}
                                        {% for cat, null in categories %}
                                        <li{% if cat == category %} class="active"{% endif %}><a href="{{ SITEURL }}/{{ cat.url }}">{{ cat }}</a></li>
                                        {% endfor %}
                                {% endif %} 
                        </ul></nav>
                </header><!-- /#banner -->
                {% block content %}
                {% endblock %}


                <div class ="footer">
                <div class = "contentinfo">
                <div class="site-info contact">
                        <h2>Contact us:</h2>
                        ctrlaltdh@gmail.com
                </div>
                <div class="site-info learn">
                        <h2>Learn More:</h2>
                        <a href="https://www.uoguelph.ca/arts/cts">CTS at U of Guelph</a>
                </div>
                </div>
                </div><!-- /#contentinfo -->

                {% include 'analytics.html' %}
                {% include 'disqus_script.html' %}
        </body>
</html>
